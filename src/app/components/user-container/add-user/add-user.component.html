<div class="container">
  <div class="form">
    <h2>User page</h2>
  <form #formValidate="ngForm">
    <div class="form-row">
      <div class="form-group col-md-6">
        <input type="text" class="form-control" [(ngModel)]="user.name" name="name" id="name" placeholder="Name" autocomplete="false" required>
      </div><!--form-group-->

      <div class="form-group col-md-6">
        <input type="text" class="form-control" [(ngModel)]="user.lastName" name="lastName" id="lastName" placeholder="Last name" autocomplete="false" required>
      </div><!--form-group-->
    </div><!--form-row-->

    <div class="form-row">
      <div class="form-group col-md-6">
        <input type="text" class="form-control" [(ngModel)]="user.username" name="username" id="username" placeholder="Username" autocomplete="false" required>
      </div><!--form-group-->

      <div class="form-group col-md-6">
        <input type="password" class="form-control" [(ngModel)]="user.password" name="password" id="password" placeholder="Password" autocomplete="false" required>
      </div><!--form-group-->
    </div><!--form-row-->

    <div class="form-row">
      <div class="form-group col-md-6">
        <input type="text" class="form-control" [(ngModel)]="user.email" name="email" id="email" placeholder="E-mail" autocomplete="false" required>
      </div><!--form-group-->

      <div class="form-group col-md-6">
        <div class="input-group">
          <input type="text" class="form-control" [(ngModel)]="user.dateOfBirth" name="dateOfBirth" 
          placeholder="Date of Birth" id="dateOfBirth" required ngbDatepicker #dateOfBirth="ngbDatepicker">
          <div class="input-group-append">
            <button class="btn btn-outline-primary" (click)="dateOfBirth.toggle()" type="button"><i class="far fa-calendar-alt"></i></button>
          </div>
        </div>
      </div>
    </div><!--form-row-->

    <div class="form-row">
      <div class="form-group col-md-6">
        <select class="form-control" [(ngModel)]="user.profession.id" name="profession" id="profession" required>
          <option [ngValue]="p.id" *ngFor="let p of professions">{{p.description}}</option>
        </select>
      </div><!--form-group-->

      <div class="form-group col-md-6">
        <input type="text" class="form-control" [(ngModel)]="user.salary" name="salary" id="salary" placeholder="Salary R$0,00" currencyMask [options]="{prefix: 'R$', thousands: '.', decimal: ','}">
      </div>
    </div><!--form-row-->

    <div class="card text-center">
      <div class="card-header">
        <h5 class="card-title">Phone of contact</h5>
      </div>
      <div class="card-body">
        <div class="form-row">
          <div class="input-group col-md-5">
            <select class="custom-select" [(ngModel)]="phone.type" name="type" id="type">
              <option selected value="fixo">Fixo</option>
              <option value="celular">Celular</option>
            </select>
          </div>

          <div class="form-group col-md-6">
            <input type="text" mask="(00) 0 0000-0000" class="form-control" [(ngModel)]="phone.number" name="number" id="number" placeholder="Number">
          </div>

          <div class="form-group col-md-1">
            <button class="btn btn-outline-success" (click)="addPhone()">Save</button>
          </div>
        </div>
      </div>
    </div>

    <table class="table table-hover table-phone">
      <thead class="thead-dark">
        <th scope="col">Type</th>
        <th scope="col">Number</th>
        <th scope="col">Delete</th>
      </thead>
      <tbody>
        <tr *ngFor="let phone of user.phones; let index = index">
          <td>{{phone.type}}</td>
          <td>{{phone.number | mask:'(00) 0 0000-0000'}}</td>
          <td><button class="btn btn-outline-danger" (click)="deletePhone(phone.id, index)">Delete</button></td>
        </tr>
      </tbody>
    </table>

    <div class="form-row right">
      <div class="form-group col-md-12">
        <button type="button" class="btn btn-outline-secondary" [routerLink]="['/users']" routerLinkActive="router-link-active" >Back</button>
        <button type="button" class="btn btn-outline-primary" (click)="newUser()">New</button>
        <button type="button" class="btn btn-outline-success" (click)="saveUser()" [disabled]="formValidate.invalid">Save</button>
      </div><!--form-group-->
    </div><!--form-row-->
    <div class="clear"></div>
  </form>
  </div>
</div><!--container-->